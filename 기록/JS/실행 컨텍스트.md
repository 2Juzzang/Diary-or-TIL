## `실행 컨텍스트 🔥`

- 실행 컨텍스트란?
  - 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위해 필요한 환경 정보들을 모아놓은 객체.
  - 모든 코드는 실행컨텍스트를 통해 관리되고 실행(실행컨텍스트가 활성화 상태일 때)된다.
  - 식별자, 스코프는 실행 컨텍스트의 **렉시컬 환경**으로 관리한다.
      - 변수 값의 변경이나 소스코드 실행 결과는 다시 실행 컨텍스트가 관리하는 스코프에 등록된다
  - 코드 실행 순서는 **실행 컨텍스트 스택**으로 관리한다.
      - 실행 컨텍스트는 스택 자료구조로 관리된다, 후입선출 구조이며 추가(push)되고 제거(pop)된다.
      - 전역 코드를 평가하여 전역 실행 컨텍스트를 생성 후 실행 컨텍스트 스택에 push한다. > 전역 코드가 실행된다 > 런타임 진행 중 함수 코드를 만나면 일시정지 되면서 스택에 쌓이고 제어권이 넘어가고 평가, 실행 후 더 이상 실행할 코드가 없으면 종료되고 실행 컨텍스트 스택에서 제거된다. > 일시정지 된 실행 컨텍스트로 다시 제어권이 넘어가고 실행할 코드가 없으면 스택에서 제거되고 종료된다.  
        
        이처럼 실행 컨텍스트 스택은 코드의 실행 순서를 관리한다.  
    

+ 실행과정(런타임)에서는 선언문을 제외한 소스코드가 순차적으로 실행된다. 예를 들어 변수의 경우 선언문은 평가 과정에서 실행되므로 이를 제외하고 런타임 과정에서는 할당문만 실행된다.

  이 때, 실행 컨텍스트가 관리하는 스코프(렉시컬 환경의 환경 레코드)에 변수가 등록되어 있는지 확인한다. (선언된 변수인지 확인) 



+ 렉시컬 환경은 스코프와 식별자를 관리하는데, 식별자와 식별자에 바인딩 된 값, 상위 스코프에 대한 참조를 기록하는 자료구조로 실행 컨텍스트를 구성하는 컴포넌트이다.

  렉시컬 환경은 키와 값을 갖는 객체 형태의 스코프(전역, 함수, 블록 스코프)를 생성하여 키로 등록하고 식별자에 바인딩된 값을 관리한다. 

  즉, 렉시컬 환경은 스코프를 구분하여 식별자를 등록하고 관리하는 저장소 역할을 하는 렉시컬 스코프의 실체이다.

  렉시컬 환경은 두 개의 컴포넌트로 구성된다.

  1. 환경 레코드(environment record)
      1. 스코프에 포함된 식별자를 등록하고 식별자에 바인딩 된 값을 관리하는 저장소
  2. 외부 렉시컬 환경에 대한 참조 (outer lexical environment reference)
      1. 상위 스코프, 즉 해당 실행 컨텍스트를 생성한 소스코드를 포함하는 상위 코드의 렉시컬 환경.